<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
    <title>引出生命週期</title>
    <script type="text/javascript" src="../js//vue.js"></script>
    <style></style>
</head>
<body>
    <!-- 
      

    -->
    <!-- 準備好一個容器-->
    <div id=root>
        <h2 :style="{opacity}">分手了怎麼辦?</h2>
        <button @click="death">不活了</button>
    </div>
  <script type="text/javascript">
     const vm = new Vue({
       el:'#root',
       data:{
        opacity:1,
       },
       methods:{
         death(){
          this.$destroy()// vm 還在，只是vm不管理root容器中的數據了，數據的監聽也移除了
          console.log(this)
         }
       },
       //vm掛載完畢
       mounted(){
         this.timer = setInterval(()=>{
           console.log('定時器的回調正在執行')
           this.opacity -= 0.01
           if(this.opacity <= 0)this.opacity = 1
         },16)
       },
       //vm 將要銷毀
       beforeDestroy(){
          clearInterval(this.timer)
       }
       
     })
  
  
  </script>
</body>
</html>